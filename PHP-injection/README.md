# PHP-инъекция

## Концепция

Уязвимости, связанные с десериализацией данных в PHP, возникают, когда приложение десериализует непроверенные пользовательские данные. Злоумышленник может создать специальные сериализованные данные для внедрения объектов и спровоцировать нежелательное поведение, например вызов опасных методов или выполнение произвольного кода. Такие уязвимости часто встречаются в PHP-приложениях, использующих функцию `unserialize()` с непроверенными входными данными.

## Принцип атаки

Когда приложение использует функцию `unserialize()` для пользовательского ввода без должной проверки, злоумышленник может внедрить сериализованные данные, создающие неожиданные объекты. Эти объекты могут содержать магические методы (например, `__wakeup()` или `__destruct()`), которые выполняют код во время десериализации. Эксплуатация этих методов позволяет выполнить вредоносные действия на сервере.

## Пример атаки

Рассмотрим PHP-приложение, которое принимает сериализованные данные через параметр `data` и десериализует их:

```php
<?php
$data = unserialize($_GET['data']);
?>
```

Злоумышленник может создать вредоносную сериализованную нагрузку, например объект с опасным магическим методом. Если в приложении используется класс с уязвимым методом `__destruct()`, который удаляет файл, атакующий может отправить сериализованную строку, представляющую экземпляр этого класса. При десериализации метод `__destruct()` автоматически вызовется и удалит указанный файл на сервере.
