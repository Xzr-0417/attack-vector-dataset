```markdown
# Документация генератора обфусцированных полезных нагрузок (Payload)

Инструмент предназначен для преобразования входного текста (обычно вредоносной нагрузки) с использованием различных методов кодирования, повышающих скрытность и способность обхода систем обнаружения. Детальное описание функциональных модулей:

## Модуль базовых функций кодирования

### URL-кодирование
```python
def url_encode(line):
    return urllib.parse.quote(line)
```

**Принцип работы**:
- Преобразование специальных символов (пробелы, пунктуация) в Unicode-эквиваленты
- Использует процентное кодирование формата `%XX` (XX - шестнадцатеричное значение)
- Примеры преобразований:
  - Пробел → `%20`
  - Новая строка → `%0A`
- Основное применение: корректная передача параметров в URL

### Чередование регистров
```python
def case_convert(line):
    converted = []
    letter_count = 0
    for char in line:
        if char.isalpha():
            letter_count += 1
            converted.append(char.swapcase() if letter_count % 2 == 1 else char)
        else:
            converted.append(char)
    return ''.join(converted)
```

**Логика преобразования**:
- Поочередное изменение регистра буквенных символов
- Небуквенные символы остаются без изменений
- Пример: "Payload" → "PaYlOaD"
- Эффект: визуальное искажение структуры текста при сохранении функциональности

### Base64-кодирование
```python
def base64_encode(line):
    return base64.b64encode(line.encode()).decode()
```

**Алгоритм преобразования**:
- Разбивка данных на 6-битные блоки
- Кодирование с использованием 64 печатных ASCII-символов
- Добавление заполняющих символов `=` при необходимости
- Пример: "Hello" → "SGVsbG8="
- Особенность: преобразование в безопасный для передачи текстовый формат

### Unicode-экранирование
```python
def unicode_escape(line):
    escaped = []
    for char in line:
        cp = ord(char)
        if cp <= 0xFFFF:
            escaped.append(f"\\u{cp:04X}")
        else:
            escaped.append(f"\\U{cp:08X}")
    return ''.join(escaped)
```

**Схема преобразования**:
- BMP-символы (U+0000-U+FFFF): формат `\uXXXX`
- Символы вне BMP: формат `\UXXXXXXXX`
- Пример: "A" → `\u0041`
- Применение: кроссплатформенная совместимость представления символов

### HTML-сущности
```python
def html_encode(line):
    return html.escape(line, quote=True)
```

**Таблица преобразований**:
- `<` → `&lt;`
- `>` → `&gt;`
- `&` → `&amp;`
- `"` → `&quot;`
- `'` → `&#x27;`
- Пример: `<script>` → `&lt;script&gt;`
- Назначение: безопасное внедрение в HTML-контент

## Реестр кодировщиков
```python
ENCODERS = [
    ("url", url_encode),
    ("case", case_convert),
    ("base64", base64_encode),
    ("unicode", unicode_escape),
    ("html", html_encode)
]
```

Модуль определяет доступные методы кодирования с привязкой к именам функций для последующего использования.

## Примеры использования

### Режим полного кодирования
```bash
python3 Polymorphic.py input.txt output.txt
```

### Выбор конкретного кодировщика
```bash
python3 Polymorphic.py input.txt output.txt url
```
